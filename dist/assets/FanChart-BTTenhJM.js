import{j as g,R as h,G as F,g as $,C as I,L as z,a as X,P as Y,b as q,c as J,p as K,i as Q}from"./index-D1yz82GC.js";import{L as U}from"./index-Bl3GNjp6.js";I.register(z,X,Y,q,J,K,Q);const Z="rgba(203,161,53,0.28)",v="rgba(203,161,53,0.12)",R="rgba(255,255,255,0.07)";function at({data:N,artifact:A}){const d=N??A;if(!d||!Array.isArray(d.median_path)||!d.median_path.length||!d.bands)return g.jsx("div",{className:"text-xs opacity-70",children:"Run a simulation to view."});const{symbol:j,horizon_days:B,median_path:w,bands:p}=d,L=w.map(([t])=>`D${t}`),_=w.map(([,t])=>t),C=p.p80_low.map(([,t])=>t),D=p.p80_high.map(([,t])=>t),P=p.p95_low.map(([,t])=>t),E=p.p95_high.map(([,t])=>t),[H,m]=h.useState(null),[f,y]=h.useState(null),M=h.useRef(null),G=(t,e,a)=>Math.max(e,Math.min(a,t)),V={labels:L,datasets:[{label:"95% band",data:E,borderWidth:0,backgroundColor:R,fill:{target:2,above:R,below:R},pointRadius:0},{label:"80% band",data:D,borderWidth:0,backgroundColor:v,fill:{target:3,above:v,below:v},pointRadius:0},{label:"_95_low",data:P,borderWidth:0,pointRadius:0},{label:"_80_low",data:C,borderWidth:0,pointRadius:0},{label:"MedianGlow",data:_,borderColor:Z,borderWidth:6,pointRadius:0,tension:.16},{label:"Median",data:_,borderColor:F,borderWidth:2,pointRadius:0,tension:.16}]},O={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{grid:{display:!1},ticks:{maxRotation:0},title:{display:!0,text:"Days",color:"#C7C9D1"}},y:{title:{display:!0,text:"Price",color:"#C7C9D1"}}},onHover:(t,e,a)=>{const n=a.scales,c=n==null?void 0:n.x,b=n==null?void 0:n.y;if(!c||!b)return;const i=$(t.native??t,a),s=c.getValueForPixel(i.x),o=b.getValueForPixel(i.y);if(s==null||o==null||!Number.isFinite(s)||!Number.isFinite(o)){m(null),y(null);return}const l=G(Math.round(Number(s)),0,L.length-1),r=C[l],u=D[l],S=P[l],W=E[l];let x=null;r!=null&&u!=null&&o>=r&&o<=u?x="p80":S!=null&&W!=null&&o>=S&&o<=W&&(x="p95"),m(l),y(x);const k=a.canvas;k&&(k.style.cursor="crosshair")}},T={id:"fanHoverOverlay",afterDraw:t=>{if(H==null)return;const{ctx:e,chartArea:a,scales:n}=t,c=n==null?void 0:n.x,b=n==null?void 0:n.y;if(!c||!b)return;const i=c.getPixelForValue(H);if(e.save(),e.strokeStyle="rgba(148,163,184,0.45)",e.lineWidth=1,e.beginPath(),e.moveTo(i,a.top),e.lineTo(i,a.bottom),e.stroke(),f){const s=f==="p80"?"80% band":"95% band",o=6,l=Math.min(Math.max(i+8,a.left+4),a.right-104),r=a.top+8;e.font="12px ui-sans-serif, system-ui, -apple-system",e.fillStyle="rgba(0,0,0,0.92)";const u=e.measureText(s).width+o*2;e.fillRect(l,r,u,18),e.strokeStyle=f==="p80"?F:"rgba(255,255,255,0.28)",e.strokeRect(l,r,u,18),e.fillStyle="#E5E7EB",e.fillText(s,l+o,r+13)}e.restore()}};return h.useEffect(()=>{var a;const t=(a=M.current)==null?void 0:a.canvas;if(!t)return;const e=()=>{m(null),y(null),t.style.cursor="default"};return t.addEventListener("mouseleave",e),()=>t.removeEventListener("mouseleave",e)},[]),g.jsx("div",{"data-chart":"fan",className:"relative w-full overflow-hidden",style:{height:360},children:g.jsx(U,{ref:M,data:V,options:O,plugins:[T],role:"img","aria-label":`Fan chart for ${j} over ${B} days with median, 80% and 95% bands`})})}export{at as default};
//# sourceMappingURL=FanChart-BTTenhJM.js.map
