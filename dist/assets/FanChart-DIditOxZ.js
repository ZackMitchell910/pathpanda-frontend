import{r as P,C as V,j as H}from"./index-fQqBtK6G.js";const _="rgba(255,255,255,0.08)",w="rgba(255,255,255,0.38)",j="rgba(255,255,255,0.07)",I="rgba(255,255,255,0.15)",T="#E5E7EB";function W({artifact:n}){const R=P.useRef(null),b=P.useRef(null),B=P.useMemo(()=>{var g,x,s,o;const p=e=>Array.isArray(e)?e.filter(l=>Array.isArray(l)&&l.length>=2&&Number.isFinite(l[0])&&Number.isFinite(l[1])):[],t=p(n==null?void 0:n.median_path),i=t.map(([e])=>e),a=t.map(([,e])=>e),u=e=>{if(!i.length)return[];const l=p(e);return l.length?i.map((E,r)=>{var h;const d=(h=l[r])==null?void 0:h[1];if(Number.isFinite(d))return d;const m=a[r];return Number.isFinite(m)?m:0}):i.map((E,r)=>Number.isFinite(a[r])?a[r]:0)},k=u((g=n==null?void 0:n.bands)==null?void 0:g.p80_low),v=u((x=n==null?void 0:n.bands)==null?void 0:x.p80_high),C=u((s=n==null?void 0:n.bands)==null?void 0:s.p95_low),A=u((o=n==null?void 0:n.bands)==null?void 0:o.p95_high);return{xs:i,median:a,p80L:k,p80H:v,p95L:C,p95H:A}},[n]);return P.useEffect(()=>{var x;const p=(x=R.current)==null?void 0:x.getContext("2d");if(!p)return;b.current&&(b.current.destroy(),b.current=null);const{xs:t,median:i,p80L:a,p80H:u,p95L:k,p95H:v}=B,C={id:"fanBands",beforeDatasetsDraw(s){var N;const{chartArea:o,ctx:e}=s,{top:l,bottom:E}=o,r=s.scales.x,d=s.scales.y;if(!r||!d||!t.length)return;function m(y,D,L){e.save(),e.beginPath(),t.forEach((c,f)=>{const F=r.getPixelForValue(c),S=d.getPixelForValue(D[f]);f===0?e.moveTo(F,S):e.lineTo(F,S)});for(let c=t.length-1;c>=0;c--){const f=r.getPixelForValue(t[c]),F=d.getPixelForValue(y[c]);e.lineTo(f,F)}e.closePath(),e.fillStyle=L,e.fill(),e.restore()}m(k,v,j),m(a,u,I);const h=(N=s.getActiveElements)==null?void 0:N.call(s)[0];if(h){const y=s.scales.x.getPixelForValue(h.index);e.save(),e.strokeStyle="rgba(255,255,255,0.25)",e.lineWidth=1,e.beginPath(),e.moveTo(y,l),e.lineTo(y,E),e.stroke(),e.restore()}}},A={animation:!1,responsive:!0,maintainAspectRatio:!1,scales:{x:{ticks:{color:w,autoSkip:!0,maxTicksLimit:8},grid:{color:_}},y:{ticks:{color:w},grid:{color:_}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17,17,17,0.95)",titleColor:"#fff",bodyColor:"#e5e7eb",borderColor:"rgba(255,255,255,0.12)",borderWidth:1,callbacks:{title:s=>{var o,e;return`Day ${((e=(o=s==null?void 0:s[0])==null?void 0:o.parsed)==null?void 0:e.x)??""}`},label:s=>{var o,e;return` ${s.dataset.label}: ${(e=(o=s.parsed.y)==null?void 0:o.toFixed)==null?void 0:e.call(o,2)}`}}}},elements:{line:{tension:.2}}},g=new V(p,{type:"line",data:{labels:t,datasets:[{label:"Median",data:i,borderColor:T,backgroundColor:T,borderWidth:2,pointRadius:0}]},options:A,plugins:[C]});return b.current=g,()=>{g.destroy(),b.current=null}},[n]),H.jsx("canvas",{ref:R,className:"w-full h-full"})}export{W as default};
