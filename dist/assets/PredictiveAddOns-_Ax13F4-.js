import{r as g,j as e}from"./index-BWcUjsGU.js";function f({scenarios:s,activeMap:r,selectedId:x,onToggle:d,onSelect:h,onReset:a}){const{totalWeight:c,activeWeight:o,activeCount:b}=g.useMemo(()=>{const t=s.reduce((i,l)=>i+(l.weight??0),0),n=s.reduce((i,l)=>r[l.id]??!0?i+(l.weight??0):i,0),m=s.reduce((i,l)=>i+(r[l.id]??!0?1:0),0);return{totalWeight:t,activeWeight:n,activeCount:m}},[s,r]);if(!s.length)return e.jsx("div",{className:"text-xs text-white/60",children:"No scenarios available."});const p=c>0?Math.max(0,Math.min(1,o/c)):b/s.length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/60",children:[e.jsxs("span",{children:["Active coverage:",e.jsx("span",{className:"ms-1 font-semibold text-white/80",children:j(p)})]}),a&&e.jsx("button",{type:"button",className:"rounded-md border border-white/15 px-2 py-1 text-[11px] text-white/70 transition hover:bg-white/10",onClick:a,children:"Reset toggles"})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:s.map(t=>{const n=r[t.id]??!0,m=x===t.id,i=t.weight!==null?Math.max(0,Math.min(100,t.weight*100)):null,l=Array.isArray(t.drivers)?t.drivers.slice(0,3):[];return e.jsxs("div",{className:`rounded-xl border px-3 py-3 transition ${m?"border-sky-400 bg-sky-400/10":"border-white/10 bg-white/5 hover:border-white/20"} ${n?"":"opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("button",{type:"button",className:"text-left",onClick:()=>h(t.id),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.color&&e.jsx("span",{className:"inline-block h-2 w-2 rounded-full",style:{backgroundColor:t.color}}),e.jsx("span",{className:"text-sm font-semibold text-white/90",children:t.label})]}),t.description&&e.jsx("p",{className:"mt-1 text-[11px] text-white/60 line-clamp-2",children:t.description}),!t.description&&t.narrative&&e.jsx("p",{className:"mt-1 text-[11px] text-white/60 line-clamp-2",children:t.narrative})]}),e.jsx("button",{type:"button",className:`rounded-full border px-2 py-0.5 text-[10px] font-semibold transition ${n?"border-emerald-400/60 bg-emerald-400/10 text-emerald-100":"border-white/15 bg-black/40 text-white/60"}`,onClick:()=>d(t.id),children:n?"Active":"Off"})]}),i!==null&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-white/60",children:[e.jsx("span",{children:"Weight"}),e.jsxs("span",{className:"font-mono text-white/80",children:[i.toFixed(1),"%"]})]}),e.jsx("div",{className:"mt-1 h-2 rounded-full bg-white/10 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${i}%`,backgroundColor:t.color??"rgba(56,189,248,0.8)"}})})]}),l.length>0&&e.jsx("div",{className:"mt-3 space-y-1 text-[11px] text-white/70",children:l.map((u,w)=>e.jsxs("div",{className:"flex justify-between gap-2 font-mono",children:[e.jsx("span",{className:"truncate text-white/60",children:u.feature}),e.jsx("span",{children:u.weight.toFixed(4)})]},`${t.id}-drv-${w}`))})]},t.id)})})]})}function N({drivers:s}){const r=Array.isArray(s)?s:[],x=Math.max(1e-6,...r.map(d=>Math.abs(d.weight||0)));return e.jsxs("div",{className:"space-y-2",children:[r.length===0&&e.jsx("div",{className:"text-xs text-white/60",children:"No drivers available."}),r.map((d,h)=>{const a=Number(d.weight||0),c=Math.min(100,Math.round(Math.abs(a)/x*100)),o=a>=0?1:-1;return e.jsxs("div",{className:"p-2 rounded-lg border border-white/10 bg-black/40",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-white/80",children:d.feature}),e.jsx("span",{className:"tabular-nums text-white/70",children:a.toFixed(4)})]}),e.jsx("div",{className:"mt-1 h-2 rounded-full bg-white/10 overflow-hidden",children:e.jsx("div",{className:`h-full ${o>0?"bg-emerald-400":"bg-rose-400"}`,style:{width:`${c}%`},title:`${a.toFixed(4)}`})})]},h)})]})}function j(s){return`${Math.round(s*100)}%`}export{N as DriversWaterfall,f as ScenarioTiles};
