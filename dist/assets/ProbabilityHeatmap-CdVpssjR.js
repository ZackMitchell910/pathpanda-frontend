import{r as f,j as n}from"./index-BWcUjsGU.js";function M({thresholds:r,probsByDay:o,days:m,spot:a,selected:l,onSelect:d}){const c=f.useMemo(()=>{const t=Array.isArray(r)?r:[],e=Array.isArray(o)?o:[],i=t.length,s=Math.max(0,...e.map(b=>Array.isArray(b)?b.length:0)),u=Array.isArray(m)&&m.length===s?m:Array.from({length:s},(b,h)=>h);return{rows:Array.from({length:i},(b,h)=>{const y=Number(t[h]),g=Array.isArray(e[h])?e[h]:[];return{threshold:y,probs:u.map((F,N)=>{const x=Number(g[N]);return Number.isFinite(x)&&x>=0?x:0})}}),dayLabels:u}},[r,o,m]),p=f.useMemo(()=>!a||!Number.isFinite(a)?r.map(t=>`$${w(t)}`):r.map(t=>{if(!Number.isFinite(t))return"-";const e=(t/a-1)*100;return`${e>=0?"+":""}${e.toFixed(0)}%`}),[r,a]);return!c.rows.length||!c.dayLabels.length?n.jsx("div",{className:"flex h-full items-center justify-center text-xs text-white/60",children:"No probability ladder available."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-separate border-spacing-[2px] text-[11px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-white/60",children:[n.jsx("th",{className:"sticky left-0 z-[1] rounded-md bg-black/60 px-2 py-1 text-left font-normal",children:"Threshold"}),c.dayLabels.map(t=>n.jsxs("th",{className:"rounded-md bg-black/40 px-2 py-1 font-normal",children:["D",t]},t))]})}),n.jsx("tbody",{children:c.rows.map((t,e)=>n.jsxs("tr",{children:[n.jsx("td",{className:"sticky left-0 z-[1] whitespace-nowrap rounded-md bg-black/70 px-2 py-1 text-white/80",children:p[e]??"-"}),t.probs.map((i,s)=>{const u=(l==null?void 0:l.thresholdIndex)===e&&(l==null?void 0:l.dayIndex)===s;return n.jsx("td",{className:`rounded-md px-2 py-1 text-center font-medium ${u?"ring-2 ring-sky-300 ring-offset-0":""}`,style:{background:j(i,u),color:A(i)},onClick:()=>d==null?void 0:d({thresholdIndex:e,dayIndex:s,probability:i,threshold:t.threshold,day:c.dayLabels[s]}),children:$(i)},`cell-${e}-${s}`)})]},`thr-${t.threshold}-${e}`))})]})})}function j(r,o){const a=.18+Math.max(0,Math.min(1,Number(r)||0))*.65;return o?`rgba(56,189,248,${Math.min(.95,a+.1)})`:`rgba(56,189,248,${a})`}function A(r){return r>.6?"#0f172a":"rgba(248,250,252,0.92)"}function $(r){return Number.isFinite(r)?`${Math.round(r*100)}%`:"-"}function w(r){return Number(r).toFixed(2)}export{M as ProbabilityHeatmap};
